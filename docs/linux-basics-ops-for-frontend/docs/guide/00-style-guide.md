# 00. 文档统一风格指南（标题/代码块/表格/命令示例）

> 目标：统一全书的表达与结构，提升可读性与可操作性；为后续批量规范化提供明确标准。

你将学到
- 标题层级与章节结构
- 代码块语言标注与高亮规范
- 表格/列表与术语写法
- 命令-输出-解释的三段式模板
- 文件命名、交叉链接与参考资料格式

## 1. 标题层级与结构

- 章节标题：一级标题（#），统一使用「序号. 主题（可选角色定位）」格式
  - 示例：`# 11. Nginx 与反向代理（前端运维向）`
- 章节内小节：二级到四级标题（##/###/####），避免超过四级
- 小节顺序建议：
  1) 背景与核心概念
  2) 最小可运行示例（含完整配置/命令）
  3) 进阶/扩展（性能/安全/兼容）
  4) 排错与验证（SOP）
  5) 实操练习（含答案要点）
  6) 关联/参考资料

## 2. 代码块与高亮

- 所有代码块必须标注语言：
  - Shell 命令：```bash
  - Nginx：```nginx
  - YAML（K8s/Compose）：```yaml
  - JSON：```json
  - 其他：按实际语言标注（js/ts/dockerfile等）
- 命令与输出分离：命令块与输出块分别使用独立代码块
  - 命令块使用 `bash`
  - 输出块使用 `text` 或相应工具输出语言
- 禁止在同一代码块混合命令与输出；避免超长行与无意义高亮

## 3. 表格与列表

- 表格用于“概念映射/对比”；首列为概念，后列为说明或示例
- 列表用于步骤（有序列表 1/2/3）与要点（无序列表 -）
- 统一中文符号与半角英文混排规则：
  - 术语（英文）按原文保留：TLS、HTTP/2、Ingress
  - 首次出现配中文注解：例如「Ingress（入口控制器）」
- 统一大小写与缩写：采用社区常用形式（Redis、Nginx、Kubernetes）

## 4. 命令-输出-解释三段式模板（强制）

- 每个实操示例均需采用三段式，模板如下：

示例模板（复制使用）：
```bash
# 命令（Command）
nginx -t && nginx -s reload
```

```text
# 输出（Output）
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
```

- 解释（Explanation）
  - 语法检查后平滑重载；若失败，查看 error_log 并回滚至上一次可用版本

补充规范：
- 命令行示例中的变量以大写占位：EXAMPLE_HOST、EXAMPLE_PATH
- 涉及破坏性命令（rm、iptables、生产影响）需显式标注“谨慎执行”

## 5. 术语与引用

- 术语首现处：英文原文 + 中文注解；后续仅使用英文或已约定的中文短语
- 路径/域名示例统一使用：
  - 路径：`/var/log/nginx/`、`/etc/nginx/`
  - 域名：`example.com`、`api.example.com`
- 引用外部工具/文档时，给出简短说明 + 链接（官方/权威）

## 6. 文件命名与交叉链接

- 文件命名：`NN-title-kebab-case.md`（NN 为两位序号）
- 链接风格：同目录相对路径，使用明确链接文字
  - 示例：参见「[11. Nginx 与反向代理](./11-nginx-and-reverse-proxy.md)」
- 参考资料置于末尾，分条列出；避免内联原始长链接

## 7. 常见错误与自动化修复建议

- 标题未标注层级或跳级（自动修复：统一提升/降低层级）
- 代码块未标注语言（自动修复：按上下文推断并补齐）
- 命令与输出混在同块（自动修复：拆分为两块并加注释）
- 表格无头行或列不齐（人工修正为准）
- 术语不一致（自动修复：按术语表替换；人工核对特殊上下文）

## 8. 参考格式

- 参考资料列表示例：
  - Nginx 官方文档：HTTP Core、SSL、Upstream
  - Prometheus 官方文档：histogram_quantile、rate
  - Kubernetes 官方文档：Deployment/Service/Ingress/Probe
- 每条参考需包含简短注释（为何参考此处）

## 9. 执行与校验流程（批量规范）

- [ ] 运行“标题层级检查”与“代码块语言检查”
- [ ] 按模板改造所有实操示例为三段式
- [ ] 对照术语表统一术语与缩写
- [ ] 逐章添加“实操练习与参考资料”
- [ ] 最终目录与交叉链接校对（章节编号、链接指向、引用完整）